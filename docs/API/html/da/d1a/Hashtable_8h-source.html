<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>KA3D API Reference: Hashtable.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="../../modules.html"><span>Modules</span></a></li>
    <li><a href="../../classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="../../files.html"><span>Files</span></a></li>
  </ul></div>
<h1>Hashtable.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef _LANG_HASHTABLE_H</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define _LANG_HASHTABLE_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;lang/pp.h&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;lang/Object.h&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;lang/assert.h&gt;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <a class="code" href="../../d6/d92/group__lang.html#ge87bc3f9c3beb9b22afae96d24321e4c">BEGIN_NAMESPACE</a>(lang) 
<a name="l00011"></a>00011 
<a name="l00012"></a>00012     
<a name="l00013"></a>00013 
<a name="l00020"></a>00020 template &lt;class K&gt; class Hash
<a name="l00021"></a>00021 {
<a name="l00022"></a>00022 <span class="keyword">public</span>:
<a name="l00023"></a>00023     <span class="keywordtype">int</span> operator()( <span class="keyword">const</span> K&amp; x )<span class="keyword"> const</span>
<a name="l00024"></a>00024 <span class="keyword">    </span>{
<a name="l00025"></a>00025         <span class="keywordflow">return</span> x.hashCode();
<a name="l00026"></a>00026     }
<a name="l00027"></a>00027 };
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="keyword">template</span> &lt;&gt; <span class="keyword">class </span>Hash&lt;char&gt; 
<a name="l00030"></a>00030     {<span class="keyword">public</span>: <span class="keywordtype">int</span> operator()( <span class="keyword">const</span> <span class="keywordtype">char</span>&amp; x )<span class="keyword"> const </span>{<span class="keywordflow">return</span> x;}};
<a name="l00031"></a>00031 <span class="keyword">template</span> &lt;&gt; <span class="keyword">class </span>Hash&lt;short&gt; 
<a name="l00032"></a>00032     {<span class="keyword">public</span>: <span class="keywordtype">int</span> operator()( <span class="keyword">const</span> <span class="keywordtype">short</span>&amp; x )<span class="keyword"> const </span>{<span class="keywordflow">return</span> x;}};
<a name="l00033"></a>00033 <span class="keyword">template</span> &lt;&gt; <span class="keyword">class </span>Hash&lt;int&gt; 
<a name="l00034"></a>00034     {<span class="keyword">public</span>: <span class="keywordtype">int</span> operator()( <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; x )<span class="keyword"> const </span>{<span class="keywordflow">return</span> x;}};
<a name="l00035"></a>00035 <span class="keyword">template</span> &lt;&gt; <span class="keyword">class </span>Hash&lt;float&gt; 
<a name="l00036"></a>00036     {<span class="keyword">public</span>: <span class="keywordtype">int</span> operator()( <span class="keyword">const</span> <span class="keywordtype">float</span>&amp; x )<span class="keyword"> const </span>{<span class="keywordflow">return</span> *(<span class="keywordtype">int</span>*)&amp;x;}};
<a name="l00037"></a>00037 <span class="keyword">template</span> &lt;&gt; <span class="keyword">class </span>Hash&lt;long&gt; 
<a name="l00038"></a>00038     {<span class="keyword">public</span>: <span class="keywordtype">int</span> operator()( <span class="keyword">const</span> <span class="keywordtype">long</span>&amp; x )<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<span class="keywordtype">int</span>)x;}};
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="comment">/*</span>
<a name="l00042"></a>00042 <span class="comment"> * Data structure used by the Hashtable implementation. </span>
<a name="l00043"></a>00043 <span class="comment"> */</span>
<a name="l00044"></a>00044 <span class="keyword">template</span> &lt;<span class="keyword">class</span> K, <span class="keyword">class</span> T&gt; <span class="keyword">class </span>HashtablePair
<a name="l00045"></a>00045 {
<a name="l00046"></a>00046 <span class="keyword">public</span>:
<a name="l00047"></a>00047     K                   key;
<a name="l00048"></a>00048     T                   value;
<a name="l00049"></a>00049     HashtablePair&lt;K,T&gt;* next;
<a name="l00050"></a>00050     <span class="keywordtype">bool</span>                used;
<a name="l00051"></a>00051 
<a name="l00052"></a>00052     HashtablePair()
<a name="l00053"></a>00053     {   
<a name="l00054"></a>00054         defaults();
<a name="l00055"></a>00055     }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057     <span class="keywordtype">void</span> defaults()
<a name="l00058"></a>00058     {
<a name="l00059"></a>00059         next = 0;
<a name="l00060"></a>00060         used = <span class="keyword">false</span>;
<a name="l00061"></a>00061         key = K();
<a name="l00062"></a>00062         value = T();
<a name="l00063"></a>00063     }
<a name="l00064"></a>00064 };
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 
<a name="l00071"></a><a class="code" href="../../d7/d37/classHashtableIterator.html">00071</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> K, <span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="../../d7/d37/classHashtableIterator.html">HashtableIterator</a>
<a name="l00072"></a>00072 {
<a name="l00073"></a>00073 <span class="keyword">public</span>:
<a name="l00074"></a>00074     <a class="code" href="../../d7/d37/classHashtableIterator.html">HashtableIterator</a>()                                                             {m_data=0; m_last=0; m_index=0; m_item=0;}
<a name="l00075"></a>00075     <a class="code" href="../../d7/d37/classHashtableIterator.html">HashtableIterator</a>( HashtablePair&lt;K,T&gt;* data, <span class="keywordtype">int</span> cap, HashtablePair&lt;K,T&gt;* item, <span class="keywordtype">int</span> index );
<a name="l00076"></a>00076 
<a name="l00078"></a>00078     <a class="code" href="../../d7/d37/classHashtableIterator.html">HashtableIterator&lt;K,T&gt;</a>&amp; <a class="code" href="../../d7/d37/classHashtableIterator.html#0e19df9b2e303829fbf1b6e82c90a277">operator++</a>();
<a name="l00079"></a>00079 
<a name="l00081"></a><a class="code" href="../../d7/d37/classHashtableIterator.html#ff27650fa7ca5c829385c33525c22a4f">00081</a>     <span class="keywordtype">bool</span>            <a class="code" href="../../d7/d37/classHashtableIterator.html#ff27650fa7ca5c829385c33525c22a4f">operator==</a>( <span class="keyword">const</span> <a class="code" href="../../d7/d37/classHashtableIterator.html">HashtableIterator&lt;K,T&gt;</a>&amp; other )<span class="keyword"> const         </span>{<span class="keywordflow">return</span> m_item == other.<a class="code" href="../../d7/d37/classHashtableIterator.html#0000e3c0c4db9c400f8ab7420dc9d9ee">m_item</a>;}
<a name="l00082"></a>00082 
<a name="l00084"></a><a class="code" href="../../d7/d37/classHashtableIterator.html#5af22d7263cf81888059f336f87022dd">00084</a>     <span class="keywordtype">bool</span>            <a class="code" href="../../d7/d37/classHashtableIterator.html#5af22d7263cf81888059f336f87022dd">operator!=</a>( <span class="keyword">const</span> <a class="code" href="../../d7/d37/classHashtableIterator.html">HashtableIterator&lt;K,T&gt;</a>&amp; other )<span class="keyword"> const         </span>{<span class="keywordflow">return</span> m_item != other.<a class="code" href="../../d7/d37/classHashtableIterator.html#0000e3c0c4db9c400f8ab7420dc9d9ee">m_item</a>;}
<a name="l00085"></a>00085 
<a name="l00087"></a><a class="code" href="../../d7/d37/classHashtableIterator.html#e4908b9f7db1d37dcb6e442ed4bd06b4">00087</a>     <span class="keyword">const</span> K&amp;        <a class="code" href="../../d7/d37/classHashtableIterator.html#e4908b9f7db1d37dcb6e442ed4bd06b4">key</a>()<span class="keyword"> const                                                     </span>{assert( m_item ); <span class="keywordflow">return</span> m_item-&gt;key;}
<a name="l00088"></a>00088 
<a name="l00090"></a><a class="code" href="../../d7/d37/classHashtableIterator.html#321b2be89ea5c364a03c4cc7a6cfdee3">00090</a>     T&amp;              <a class="code" href="../../d7/d37/classHashtableIterator.html#321b2be89ea5c364a03c4cc7a6cfdee3">value</a>()<span class="keyword"> const                                                   </span>{assert( m_item ); <span class="keywordflow">return</span> m_item-&gt;value;}
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 <span class="keyword">private</span>:
<a name="l00093"></a>00093     HashtablePair&lt;K,T&gt;*     m_data;
<a name="l00094"></a>00094     <span class="keywordtype">int</span>                     m_last;
<a name="l00095"></a>00095     <span class="keywordtype">int</span>                     m_index;
<a name="l00096"></a>00096     HashtablePair&lt;K,T&gt;*     m_item;
<a name="l00097"></a>00097 };
<a name="l00098"></a>00098 
<a name="l00099"></a>00099     
<a name="l00109"></a><a class="code" href="../../d7/d6c/classHashtable.html">00109</a> <span class="keyword">template</span> &lt; <span class="keyword">class</span> K, <span class="keyword">class</span> T, <span class="keyword">class</span> F=Hash&lt;K&gt; &gt; <span class="keyword">class </span><a class="code" href="../../d7/d6c/classHashtable.html">Hashtable</a> :
<a name="l00110"></a>00110     <span class="keyword">public</span> <a class="code" href="../../db/d77/group__mathstr.html#gac2f2e6a47584a6f6396155a7f3ea198">NS</a>(lang,Object)
<a name="l00111"></a>00111 {
<a name="l00112"></a>00112 <span class="keyword">public</span>:
<a name="l00114"></a>00114     <a class="code" href="../../d7/d6c/classHashtable.html#c8dfd82ba95e171ef698a6d9e3edfd4a">Hashtable</a>();
<a name="l00115"></a>00115 
<a name="l00120"></a>00120     <span class="keyword">explicit</span> <a class="code" href="../../d7/d6c/classHashtable.html#c8dfd82ba95e171ef698a6d9e3edfd4a">Hashtable</a>( <span class="keywordtype">int</span> initialcapacity, <span class="keywordtype">float</span> loadfactor=0.75f, 
<a name="l00121"></a>00121         <span class="keyword">const</span> T&amp; defaultvalue=T(), <span class="keyword">const</span> F&amp; hashfunc=F() );
<a name="l00122"></a>00122 
<a name="l00124"></a>00124     <a class="code" href="../../d7/d6c/classHashtable.html#c8dfd82ba95e171ef698a6d9e3edfd4a">Hashtable</a>( <span class="keyword">const</span> <a class="code" href="../../d7/d6c/classHashtable.html">Hashtable&lt;K,T,F&gt;</a>&amp; other );
<a name="l00125"></a>00125 
<a name="l00127"></a>00127     ~<a class="code" href="../../d7/d6c/classHashtable.html">Hashtable</a>();
<a name="l00128"></a>00128 
<a name="l00130"></a>00130     <a class="code" href="../../d7/d6c/classHashtable.html">Hashtable&lt;K,T,F&gt;</a>&amp; <a class="code" href="../../d7/d6c/classHashtable.html#409ddd47e39e10cc89f6c7011907d3be">operator=</a>( <span class="keyword">const</span> <a class="code" href="../../d7/d6c/classHashtable.html">Hashtable&lt;K,T,F&gt;</a>&amp; other );
<a name="l00131"></a>00131 
<a name="l00133"></a>00133     T&amp;          <a class="code" href="../../d7/d6c/classHashtable.html#db6414de60a94627181297bd0542787c">operator[]</a>( <span class="keyword">const</span> K&amp; key );
<a name="l00134"></a>00134 
<a name="l00139"></a>00139     <span class="keywordtype">void</span>        <a class="code" href="../../d7/d6c/classHashtable.html#0ea79a0a6597e0e6669a3f3f7d62dda6">put</a>( <span class="keyword">const</span> K&amp; key, <span class="keyword">const</span> T&amp; value );
<a name="l00140"></a>00140 
<a name="l00145"></a>00145     <span class="keywordtype">void</span>        <a class="code" href="../../d7/d6c/classHashtable.html#9c97290ef947bb259a6010e624b05f83">remove</a>( <span class="keyword">const</span> K&amp; key );
<a name="l00146"></a>00146 
<a name="l00148"></a>00148     <span class="keywordtype">void</span>        <a class="code" href="../../d7/d6c/classHashtable.html#797183ebc9b73576e8308c842e383706">clear</a>();
<a name="l00149"></a>00149 
<a name="l00155"></a>00155     <span class="keywordtype">void</span>        <a class="code" href="../../d7/d6c/classHashtable.html#8db29fe9eac8d901cc2c79d5fdc77878">merge</a>( <span class="keyword">const</span> <a class="code" href="../../d7/d6c/classHashtable.html">Hashtable&lt;K,T,F&gt;</a>&amp; other );
<a name="l00156"></a>00156 
<a name="l00161"></a>00161     T&amp;          <a class="code" href="../../d7/d6c/classHashtable.html#99a82c42b0eb0cd4bdba498336a0cabc">get</a>( <span class="keyword">const</span> K&amp; key );
<a name="l00162"></a>00162 
<a name="l00164"></a>00164     <span class="keyword">const</span> T&amp;    <a class="code" href="../../d7/d6c/classHashtable.html#db6414de60a94627181297bd0542787c">operator[]</a>( <span class="keyword">const</span> K&amp; key ) <span class="keyword">const</span>;
<a name="l00165"></a>00165 
<a name="l00170"></a>00170     <span class="keyword">const</span> T&amp;    <a class="code" href="../../d7/d6c/classHashtable.html#99a82c42b0eb0cd4bdba498336a0cabc">get</a>( <span class="keyword">const</span> K&amp; key ) <span class="keyword">const</span>;
<a name="l00171"></a>00171 
<a name="l00176"></a>00176     <a class="code" href="../../d7/d37/classHashtableIterator.html">HashtableIterator&lt;K,T&gt;</a>  <a class="code" href="../../d7/d6c/classHashtable.html#80adfb4aefcef6ce393b2cf26a2ca9fc">getIterator</a>( <span class="keyword">const</span> K&amp; key ) <span class="keyword">const</span>;
<a name="l00177"></a>00177 
<a name="l00179"></a>00179     <span class="keywordtype">int</span>         <a class="code" href="../../d7/d6c/classHashtable.html#5eb2a09035151e9412b64a6b85145f9e">size</a>() <span class="keyword">const</span>;
<a name="l00180"></a>00180 
<a name="l00182"></a>00182     <span class="keywordtype">bool</span>        <a class="code" href="../../d7/d6c/classHashtable.html#706ff478c63d928284c6f2eddaf4ced7">isEmpty</a>() <span class="keyword">const</span>;
<a name="l00183"></a>00183 
<a name="l00185"></a>00185     <span class="keywordtype">bool</span>        <a class="code" href="../../d7/d6c/classHashtable.html#2babc6f653b7bfbd22bd430429ed74de">containsKey</a>( <span class="keyword">const</span> K&amp; key ) <span class="keyword">const</span>;
<a name="l00186"></a>00186 
<a name="l00191"></a>00191     <span class="keywordtype">int</span>         <a class="code" href="../../d7/d6c/classHashtable.html#6e9ee75199e03559d83b1f776026fa87">collisions</a>() <span class="keyword">const</span>;
<a name="l00192"></a>00192 
<a name="l00197"></a>00197     <a class="code" href="../../d7/d37/classHashtableIterator.html">HashtableIterator&lt;K,T&gt;</a>  <a class="code" href="../../d7/d6c/classHashtable.html#3afa6fd8846786a36bc319a7488e4369">begin</a>() <span class="keyword">const</span>;
<a name="l00198"></a>00198 
<a name="l00203"></a>00203     <a class="code" href="../../d7/d37/classHashtableIterator.html">HashtableIterator&lt;K,T&gt;</a>  <a class="code" href="../../d7/d6c/classHashtable.html#ead2c626a2918229385c570d3530f131">end</a>() <span class="keyword">const</span>;
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 <span class="keyword">private</span>:
<a name="l00206"></a>00206     <span class="keywordtype">int</span>                     m_cap;
<a name="l00207"></a>00207     HashtablePair&lt;K,T&gt;*     m_data;
<a name="l00208"></a>00208     <span class="keywordtype">float</span>                   m_loadFactor;
<a name="l00209"></a>00209     <span class="keyword">mutable</span> <span class="keywordtype">int</span>             m_entries;
<a name="l00210"></a>00210     <span class="keywordtype">int</span>                     m_entryLimit;
<a name="l00211"></a>00211     T                       m_defaultValue;
<a name="l00212"></a>00212     <span class="keyword">mutable</span> <span class="keywordtype">int</span>             m_collisions;
<a name="l00213"></a>00213     F                       m_hashFunc;
<a name="l00214"></a>00214 
<a name="l00215"></a>00215     <span class="keywordtype">void</span>                defaults();
<a name="l00216"></a>00216     <span class="keywordtype">void</span>                destroy();
<a name="l00217"></a>00217     <span class="keywordtype">void</span>                grow();
<a name="l00218"></a>00218     <span class="keywordtype">void</span>                rehashTo( HashtablePair&lt;K,T&gt;* data, <span class="keywordtype">int</span> cap ) <span class="keyword">const</span>;
<a name="l00219"></a>00219     HashtablePair&lt;K,T&gt;* allocateTable( <span class="keywordtype">int</span> cap ) <span class="keyword">const</span>;
<a name="l00220"></a>00220     <span class="keywordtype">void</span>                deallocateTable( HashtablePair&lt;K,T&gt;* data, <span class="keywordtype">int</span> cap ) <span class="keyword">const</span>;
<a name="l00221"></a>00221     HashtablePair&lt;K,T&gt;* getPair( HashtablePair&lt;K,T&gt;* data, <span class="keywordtype">int</span> cap, <span class="keyword">const</span> K&amp; key ) <span class="keyword">const</span>;
<a name="l00222"></a>00222 };
<a name="l00223"></a>00223 
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 <span class="preprocessor">#include &lt;lang/Hashtable.inl&gt;</span>
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 <a class="code" href="../../d6/d92/group__lang.html#gce508b538a678f69f6213076f2f85859">END_NAMESPACE</a>() <span class="comment">// lang</span>
<a name="l00229"></a>00229 
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 <span class="preprocessor">#endif // _LANG_HASHTABLE_H</span>
<a name="l00232"></a>00232 <span class="preprocessor"></span>
<a name="l00233"></a>00233 <span class="comment">// Copyright (C) 2004-2006 Pixelgene Ltd. All rights reserved. Consult your license regarding permissions and restrictions.</span>
</pre></div><br><br><small></small><br><br></body></html>
