<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>KA3D API Reference: Language support library</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="../../modules.html"><span>Modules</span></a></li>
    <li><a href="../../classes.html"><span>Classes</span></a></li>
    <li><a href="../../files.html"><span>Files</span></a></li>
  </ul></div>
<h1>Language support library</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
To provide better support for Unicode, typical game requirements and to avoid excessive compile-time dependencies, a custom low-level language support library lang is used instead of using C++ STL. 
<p>
The library uses only standard C functions in its implementation. Some of the classes are designed loosely after java.lang.* counterparts, which is also source for the name of the library.<p>
Most used class are template flexible size array class Array, Unicode string class <a class="el" href="../../d3/dee/classString.html">String</a>, reference counted base class Object and reference count updating pointer Ptr (or more commonly used macro P which maps to the NS(lang,Ptr)) Note that Object class is not thread safe, so you cannot share any Object derived classes between threads.<p>
Array class is resizable linear container. Arrays are meant to be used as part of higher abstraction level objects so they don't have functionality for reference counting.<p>
<a class="el" href="../../d3/dee/classString.html">String</a> class is a Unicode string, which uses UTF-8 data and internal string pool. This makes it possible to create/destroy variable length Unicode (UTF-8) strings without any run-time memory allocations in the application. <a class="el" href="../../d3/dee/classString.html">String</a> is internally reference counted.<p>
Frequently used class is Debug too, which provides support for debug output. Don't confuse this with the on-screen text rendering provided by NS(hgr,Console).<p>
Debug output can be viewed with IDE debugger or stand-alone debug output viewer -- there are multiple available for free on Internet. This kind of debug output has several benefits over traditional log files: <ol>
<li>
You get debug output visible already while running application without file access / reload issues. </li>
<li>
You always get up-to-date output, instead of accidentally looking at old debug output files. </li>
<li>
Debug output does not clutter up hard disk unless debug output viewer is active and logging enabled from the viewer. </li>
<li>
Debug output can be filtered, color coded, etc., marked, depending on debug output viewer application's features. </li>
<li>
Debug output viewer can provide support for remote debug output viewing on remote PC. <ol>
</ol>
profiling is important part of any game development. <a class="el" href="../../dd/d34/classProfile.html">Profile</a> is a light-weight and high resolution performance profiling class.<p>
Usage example: {verbatim}<p>
void myFunc() { PROFILE(myFunc); ... }<p>
main() { NS(Profile,beginFrame)(); for ( int i = 0 ; i &lt; 100000 ; ++i ) myFunc(); NS(Profile,endFrame)();<p>
for ( int i = 0 ; i &lt; NS(Profile,count)() ; ++i ) printf( "%s: x%d, %g%%\n", NS(Profile,getName)(i), NS(Profile,getCount)(i), NS(Profile,getPercent)(i) ); } {verbatim}<p>
Format is a class for constructing messages that keep parameters separately from the formatting string. This is useful to be used for example in translation.<p>
Syntax of format string (=first parameter of every constructor): <ul>
<li>
{0} = replaced with 1st argument formatted to string. </li>
<li>
{1} = replaced with 2nd argument formatted to string. </li>
<li>
{n} = replaced with nth argument formatted to string. </li>
<li>
{0,x} = replaced with 1st argument formatted to hex number. </li>
<li>
{0,#.##} = replaced with 1st argument formatted to number using max 2 digits, e.g. 1.2=1.2 but 1.211=1.21. </li>
<li>
{0,#.00} = replaced with 1st argument formatted to number using exactly 2 digits, e.g. 1.2=1.20 and 1.211=1.21. </li>
<li>
{0,000} = replaced with 1st argument formatted to number using at least 3 numbers, padded with zeros, e.g. 3=003. </li>
</ul>
<p>
After constructing a Format object, it can be either formatted directly to text by using format() method, or the format string can be accessed or changed separately for translation. </li>
</ol>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d09/classDoubleLinkedList.html">DoubleLinkedList&lt; T &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Double linked list.  <a href="../../d7/d09/classDoubleLinkedList.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/classDoubleLinkedListItem.html">DoubleLinkedListItem&lt; T &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Double linked list item.  <a href="../../dc/d2c/classDoubleLinkedListItem.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6c/classHashtable.html">Hashtable&lt; K, T, F &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="../../d7/d6c/classHashtable.html">Hashtable</a> maps keys to values.  <a href="../../d7/d6c/classHashtable.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d37/classHashtableIterator.html">HashtableIterator&lt; K, T &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Forward iterator of <a class="el" href="../../d7/d6c/classHashtable.html">Hashtable</a> elements.  <a href="../../d7/d37/classHashtableIterator.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dde/classLinkedList.html">LinkedList&lt; T &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Double linked list.  <a href="../../d7/dde/classLinkedList.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df9/classLinkedListItem.html">LinkedListItem&lt; T &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Double linked list item.  <a href="../../de/df9/classLinkedListItem.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d34/classProfile.html">Profile</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Performance profiling is important part of any game development.  <a href="../../dd/d34/classProfile.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dfb/classSingleLinkedList.html">SingleLinkedList&lt; T &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Double linked list.  <a href="../../dd/dfb/classSingleLinkedList.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d9a/classSingleLinkedListItem.html">SingleLinkedListItem&lt; T &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Double linked list item.  <a href="../../d8/d9a/classSingleLinkedListItem.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dee/classString.html">String</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Immutable Unicode character string.  <a href="../../d3/dee/classString.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d92/group__lang.html#g72242f0fb02425d716d32f2bede6d43d">BEGIN_NAMESPACE</a> (img) class ShapeUtil</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Utilities for drawing debug lines and shapes to A8R8G8B8 images.  <a href="#g72242f0fb02425d716d32f2bede6d43d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d92/group__lang.html#ge87bc3f9c3beb9b22afae96d24321e4c">BEGIN_NAMESPACE</a> (lang) template&lt; class T &gt; class Array</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flexible array.  <a href="#ge87bc3f9c3beb9b22afae96d24321e4c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d92/group__lang.html#gce508b538a678f69f6213076f2f85859">END_NAMESPACE</a> () BEGIN_NAMESPACE(lang)class GlobalStorage</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Storage for global variables.  <a href="#gce508b538a678f69f6213076f2f85859"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g72242f0fb02425d716d32f2bede6d43d"></a><!-- doxytag: member="ShapeUtil.h::BEGIN_NAMESPACE" ref="g72242f0fb02425d716d32f2bede6d43d" args="(img) class ShapeUtil" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BEGIN_NAMESPACE           </td>
          <td>(</td>
          <td class="paramtype">img&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Utilities for drawing debug lines and shapes to A8R8G8B8 images. 
<p>

<p>
Draws a solid line to the image. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>img</em>&nbsp;</td><td>Image buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>w</em>&nbsp;</td><td>Image width </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>Image height </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vx0</em>&nbsp;</td><td>Line start x-coordinate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vy0</em>&nbsp;</td><td>Line start y-coordinate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vx1</em>&nbsp;</td><td>Line end x-coordinate (excl) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vy1</em>&nbsp;</td><td>Line end y-coordinate (excl) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>color</em>&nbsp;</td><td>Line color</td></tr>
  </table>
</dl>
Draws a solid polygon to the image. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>img</em>&nbsp;</td><td>Image buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>w</em>&nbsp;</td><td>Image width </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>Image height </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vx</em>&nbsp;</td><td>Polygon vertices x-coordinates </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vy</em>&nbsp;</td><td>Polygon vertices y-coordinates </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vcount</em>&nbsp;</td><td>Polygon vertex count </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>color</em>&nbsp;</td><td>Polygon color</td></tr>
  </table>
</dl>
Adds edge X-coordinates to two edge buffers. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>edge1</em>&nbsp;</td><td>Left edge buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>edge2</em>&nbsp;</td><td>Right edge buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>Height of each edge buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vx0</em>&nbsp;</td><td>Edge start X. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vy0</em>&nbsp;</td><td>Edge start Y. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vx1</em>&nbsp;</td><td>Edge end X. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vy1</em>&nbsp;</td><td>Edge end Y. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="ge87bc3f9c3beb9b22afae96d24321e4c"></a><!-- doxytag: member="Array.h::BEGIN_NAMESPACE" ref="ge87bc3f9c3beb9b22afae96d24321e4c" args="(lang) template&lt; class T &gt; class Array" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BEGIN_NAMESPACE           </td>
          <td>(</td>
          <td class="paramtype">lang&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Flexible array. 
<p>
Arrays are meant to be used as part of higher abstraction level objects so they don't have functionality for reference counting.<p>
Note that Array has important semantic difference to for example NS(std,vector): Array does NOT call destructors when array is resized to smaller one, but it uses assign operator with default (empty) array element. This behaviour might seem weird, but it is more often useful than not, since for example you don't want memory to be released too easily if you have for example Array of Arrays. And you shouldn't use too big objects in flexible arrays anyway so in practice this shouldn't harm you in any case.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>T</em>&nbsp;</td><td>Type of array element. Copy and default ctor should be nothrow. </td></tr>
  </table>
</dl>

<p>
Creates an empty array.<p>
Creates an array of specified size. <dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>OutOfMemoryException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
Copy by value.<p>
Swaps two arrays.<p>
Copy by value. <dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>OutOfMemoryException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
Returns ith element from the array.<p>
Adds an element to the end of the array. <dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>OutOfMemoryException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
Adds an element before specified index. <dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>OutOfMemoryException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
Removes an element at specified index.<p>
Removes range of elements at specified index. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>begin</em>&nbsp;</td><td>First element to remove. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>end</em>&nbsp;</td><td>One beyond the last element to remove.</td></tr>
  </table>
</dl>
Sets number of elements in the array. <dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>OutOfMemoryException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
Sets number of elements in the array to 0.<p>
Returns pointer to the beginning of the array (inclusive).<p>
Returns pointer to the end of the array (exclusive).<p>
Returns first element in the array (inclusive).<p>
Returns last element in the array (inclusive).<p>
Returns ith element from the array.<p>
Returns number of elements in the array.<p>
Returns pointer to the beginning of the array (inclusive).<p>
Returns pointer to the end of the array (exclusive).<p>
Returns first element in the array (inclusive).<p>
Returns last element in the array (inclusive).<p>
Returns index of the item in the array or -1 if not found.<p>
Returns number of elements allocated in the array. Note that this does not need to be same as size(), since if the Array is resized down, memory is by default not freed (to avoid fragmenting memory).<p>
Allocates buffer for n elements. <dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>OutOfMemoryException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
Copy in normal order.<p>
Copy in reverse order. 
</div>
</div><p>
<a class="anchor" name="gce508b538a678f69f6213076f2f85859"></a><!-- doxytag: member="GlobalStorage.h::END_NAMESPACE" ref="gce508b538a678f69f6213076f2f85859" args="() BEGIN_NAMESPACE(lang)class GlobalStorage" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">END_NAMESPACE           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Storage for global variables. 
<p>
Speculative interface which allows 'try to read option' style usage so you can try to get some command line option and if the query fails you can ask it with prompt. 
<p>
Creates simulation world, collision space and contact group, using default settings (gravity 9.8 m/s2, etc.) <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>groundlevel</em>&nbsp;</td><td>Absolute minimum Y-coordinate which limits free falls.</td></tr>
  </table>
</dl>
Sets gravity in simulation world. Default is -9.8 along Y-axis.<p>
Simulates time step. Calls user specified collision checker to find out contacts between two objects. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dt</em>&nbsp;</td><td>Time step to simulate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>checker</em>&nbsp;</td><td>Collision checker to be used to find contacts. Pass 0 to use default.</td></tr>
  </table>
</dl>
Returns simulation world.<p>
Returns collision space.<p>
Returns contact group using in collision detection.<p>
Returns number of enabled bodies in the simulation. Good for performance tuning, as number of simultaneous enabled bodies should be low for best performance. 
</div>
</div><p>
<br><br><small></small><br><br></body></html>
